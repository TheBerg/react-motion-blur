{"code":"/**\r\n * @class MotionBlur\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\nimport * as React from \"react\";\r\nvar MotionBlur = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MotionBlur, _super);\r\n    function MotionBlur(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.id = \"react-motion-blur-\" + Math.floor(Math.random() * 1e7);\r\n        _this.root = React.createRef();\r\n        _this.filter = React.createRef();\r\n        var previousX = 0;\r\n        var previousY = 0;\r\n        _this.loop = function () {\r\n            var root = _this.root.current;\r\n            var filter = _this.filter.current;\r\n            var x = root.offsetLeft;\r\n            var y = root.offsetTop;\r\n            //const {x, y} = root.getBoundingClientRect() as DOMRect;\r\n            var dx = x - previousX;\r\n            var dy = y - previousY;\r\n            _this.angle = Math.atan2(dy, dx) * 180 / Math.PI;\r\n            var magnitude = Math.sqrt(dx * dx + dy * dy);\r\n            filter.setAttribute(\"stdDeviation\", magnitude + \",0\");\r\n            previousX = x;\r\n            previousY = y;\r\n            if (_this.props.active) {\r\n                requestAnimationFrame(_this.loop);\r\n            }\r\n        };\r\n        return _this;\r\n    }\r\n    MotionBlur.prototype.componentDidMount = function () {\r\n        this.loop();\r\n    };\r\n    MotionBlur.prototype.render = function () {\r\n        var _a = this.props, children = _a.children, _active = _a.active, rest = tslib_1.__rest(_a, [\"children\", \"active\"]);\r\n        return (React.createElement(React.Fragment, null,\r\n            React.createElement(\"div\", tslib_1.__assign({}, rest, { ref: this.root }),\r\n                React.createElement(\"div\", { style: {\r\n                        transform: \"rotate(\" + this.angle + \"deg)\",\r\n                        filter: \"url(#\" + this.id + \")\"\r\n                    } },\r\n                    React.createElement(\"div\", { style: { transform: \"rotate(\" + -this.angle + \"deg)\" } }, children))),\r\n            React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", version: \"1.1\", style: {\r\n                    position: \"fixed\",\r\n                    left: \"1000%\",\r\n                } },\r\n                React.createElement(\"defs\", null,\r\n                    React.createElement(\"filter\", { id: this.id },\r\n                        React.createElement(\"feGaussianBlur\", { in: \"SourceGraphic\", ref: this.filter }))))));\r\n    };\r\n    MotionBlur.defaultProps = {\r\n        active: true\r\n    };\r\n    return MotionBlur;\r\n}(React.Component));\r\nexport { MotionBlur };\r\n//# sourceMappingURL=index.js.map","map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"src/index.tsx\"],\"names\":[],\"mappings\":\"AAAA;;GAEG;;AAEH,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAS/B;IAAgC,sCAAgC;IAW9D,oBAAY,KAAsB;QAAlC,YACE,kBAAM,KAAK,CAAC,SA8Bb;QA5BC,KAAI,CAAC,EAAE,GAAG,uBAAqB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAG,CAAC;QAEjE,KAAI,CAAC,IAAI,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAC9B,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAEhC,IAAI,SAAS,GAAG,CAAC,CAAC;QAClB,IAAI,SAAS,GAAG,CAAC,CAAC;QAClB,KAAI,CAAC,IAAI,GAAG;YACV,IAAM,IAAI,GAAG,KAAI,CAAC,IAAI,CAAC,OAAQ,CAAC;YAChC,IAAM,MAAM,GAAG,KAAI,CAAC,MAAM,CAAC,OAAQ,CAAC;YACpC,IAAM,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;YAC1B,IAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;YACzB,yDAAyD;YAEzD,IAAM,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC;YACzB,IAAM,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC;YAEzB,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC;YAChD,IAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;YAE/C,MAAM,CAAC,YAAY,CAAC,cAAc,EAAK,SAAS,OAAI,CAAC,CAAC;YAEtD,SAAS,GAAG,CAAC,CAAC;YACd,SAAS,GAAG,CAAC,CAAC;YACd,IAAI,KAAI,CAAC,KAAK,CAAC,MAAM,EAAE;gBACrB,qBAAqB,CAAC,KAAI,CAAC,IAAI,CAAC,CAAC;aAClC;QACH,CAAC,CAAC;;IACJ,CAAC;IAED,sCAAiB,GAAjB;QACE,IAAI,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAED,2BAAM,GAAN;QACE,IAAM,eAIQ,EAHZ,sBAAQ,EACR,mBAAe,EACf,iDACY,CAAC;QAEf,OAAO,CACL,oBAAC,KAAK,CAAC,QAAQ;YACb,gDAAS,IAAI,IAAE,GAAG,EAAE,IAAI,CAAC,IAAI;gBAC3B,6BACE,KAAK,EAAE;wBACL,SAAS,EAAE,YAAU,IAAI,CAAC,KAAK,SAAM;wBACrC,MAAM,EAAE,UAAQ,IAAI,CAAC,EAAE,MAAG;qBAC3B;oBAED,6BAAK,KAAK,EAAE,EAAC,SAAS,EAAE,YAAU,CAAC,IAAI,CAAC,KAAK,SAAM,EAAC,IACjD,QAAQ,CACL,CACF,CACF;YACN,6BACE,KAAK,EAAC,4BAA4B,EAClC,OAAO,EAAC,KAAK,EACb,KAAK,EAAE;oBACL,QAAQ,EAAE,OAAO;oBACjB,IAAI,EAAE,OAAO;iBACd;gBAED;oBACE,gCAAQ,EAAE,EAAE,IAAI,CAAC,EAAE;wBACjB,wCACE,EAAE,EAAC,eAAe,EAClB,GAAG,EAAE,IAAI,CAAC,MAAM,GAChB,CACK,CACJ,CACH,CACS,CAClB,CAAC;IACJ,CAAC;IAjFM,uBAAY,GAAG;QACpB,MAAM,EAAE,IAAI;KACb,CAAC;IAgFJ,iBAAC;CAAA,AAzFD,CAAgC,KAAK,CAAC,SAAS,GAyF9C;SAzFY,UAAU\"}","dts":{"name":"E:/Projects/react-motion-blur/index.d.ts","text":"/**\r\n * @class MotionBlur\r\n */\r\nimport * as React from \"react\";\r\nimport { HTMLAttributes } from \"react\";\r\nexport interface MotionBlurProps extends HTMLAttributes<HTMLDivElement> {\r\n    children: React.ReactChild;\r\n    active: boolean;\r\n}\r\nexport declare class MotionBlur extends React.Component<MotionBlurProps> {\r\n    private readonly root;\r\n    private readonly filter;\r\n    private readonly loop;\r\n    private readonly id;\r\n    private angle;\r\n    static defaultProps: {\r\n        active: boolean;\r\n    };\r\n    constructor(props: MotionBlurProps);\r\n    componentDidMount(): void;\r\n    render(): JSX.Element;\r\n}\r\n"}}
